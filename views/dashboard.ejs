<!DOCTYPE html>
<html lang="en">
<head>
    <title>Teacher Dashboard</title>
    <script>
        function editStudent(studentId, name, age, grade) {
            document.getElementById('editStudentId').value = studentId;
            document.getElementById('editName').value = name;
            document.getElementById('editAge').value = age;
            document.getElementById('editGrade').value = grade;
            document.getElementById('editModal').style.display = 'block';
        }

        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
        }

        function confirmDelete(studentId) {
            if (confirm("Are you sure you want to delete this student?")) {
                window.location.href = `/deleteStudent/${studentId}`;
            }
        }
    </script>
</head>
<body>
    <h2>Welcome, <%= teacher.name %>!</h2>
    
    <h3>Students Under Your Supervision</h3>
    
    <table>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Age</th>
            <th>Grade</th>
            <th>Actions</th>
        </tr>
        <% teacher.students.forEach(student => { %>
        <tr>
            <td><%= student.studentId %></td>
            <td><%= student.name %></td>
            <td><%= student.age %></td>
            <td><%= student.grade %></td>
            <td>
                <button onclick="editStudent('<%= student._id %>', '<%= student.name %>', '<%= student.age %>', '<%= student.grade %>')">Edit</button>
                <form action="/deleteStudent/<%= student._id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this student?')">
                    <button type="submit">Delete</button>
                  </form>                  
                  
                <a href="/assessment/<%= student._id %>">
                    <button type="button">Take Test</button>
                </a>                
                
            </td>
        </tr>
        <% }) %>        
    </table>

    <h3>Add New Student</h3>
    <form action="/addStudent" method="POST">
        <input type="hidden" name="teacherId" value="<%= teacher._id %>"> <!-- Ensure teacher ID is passed -->
        <input type="text" name="studentId" placeholder="Student ID" required>
        <input type="text" name="name" placeholder="Student Name" required>
        <input type="number" name="age" placeholder="Age" required>
        <input type="number" name="grade" placeholder="Grade" required>
        <button type="submit">Add Student</button>
    </form>
    
</body>
</html>
